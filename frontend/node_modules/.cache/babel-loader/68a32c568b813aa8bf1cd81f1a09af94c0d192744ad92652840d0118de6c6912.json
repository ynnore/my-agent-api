{"ast":null,"code":"/**\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * this module contains type-definitions and Type-Guards\n */\n\n// Type-definitions\n\n/* outgoing types */\n\n/**\n * the config to initiate the session\n */\n\n/** Incoming types */\n\n/**\n * A `toolCall` message\n */\n\n/** log types */\n\n// Type-Guards\n\nconst prop = (a, prop, kind = \"object\") => typeof a === \"object\" && typeof a[prop] === \"object\";\n\n// outgoing messages\nexport const isSetupMessage = a => prop(a, \"setup\");\nexport const isClientContentMessage = a => prop(a, \"clientContent\");\nexport const isRealtimeInputMessage = a => prop(a, \"realtimeInput\");\nexport const isToolResponseMessage = a => prop(a, \"toolResponse\");\n\n// incoming messages\nexport const isSetupCompleteMessage = a => prop(a, \"setupComplete\");\nexport const isServerContenteMessage = a => prop(a, \"serverContent\");\nexport const isToolCallMessage = a => prop(a, \"toolCall\");\nexport const isToolCallCancellationMessage = a => prop(a, \"toolCallCancellation\") && isToolCallCancellation(a.toolCallCancellation);\nexport const isModelTurn = a => typeof a.modelTurn === \"object\";\nexport const isTurnComplete = a => typeof a.turnComplete === \"boolean\";\nexport const isInterrupted = a => a.interrupted;\nexport function isToolCall(value) {\n  if (!value || typeof value !== \"object\") return false;\n  const candidate = value;\n  return Array.isArray(candidate.functionCalls) && candidate.functionCalls.every(call => isLiveFunctionCall(call));\n}\nexport function isToolResponse(value) {\n  if (!value || typeof value !== \"object\") return false;\n  const candidate = value;\n  return Array.isArray(candidate.functionResponses) && candidate.functionResponses.every(resp => isLiveFunctionResponse(resp));\n}\nexport function isLiveFunctionCall(value) {\n  if (!value || typeof value !== \"object\") return false;\n  const candidate = value;\n  return typeof candidate.name === \"string\" && typeof candidate.id === \"string\" && typeof candidate.args === \"object\" && candidate.args !== null;\n}\nexport function isLiveFunctionResponse(value) {\n  if (!value || typeof value !== \"object\") return false;\n  const candidate = value;\n  return typeof candidate.response === \"object\" && typeof candidate.id === \"string\";\n}\nexport const isToolCallCancellation = a => typeof a === \"object\" && Array.isArray(a.ids);","map":{"version":3,"names":["prop","a","kind","isSetupMessage","isClientContentMessage","isRealtimeInputMessage","isToolResponseMessage","isSetupCompleteMessage","isServerContenteMessage","isToolCallMessage","isToolCallCancellationMessage","isToolCallCancellation","toolCallCancellation","isModelTurn","modelTurn","isTurnComplete","turnComplete","isInterrupted","interrupted","isToolCall","value","candidate","Array","isArray","functionCalls","every","call","isLiveFunctionCall","isToolResponse","functionResponses","resp","isLiveFunctionResponse","name","id","args","response","ids"],"sources":["C:/SkinLensR/SkinLensR/my-agent-api/frontend/src/multimodal-live-types.ts"],"sourcesContent":["/**\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type {\n  Content,\n  FunctionCall,\n  GenerationConfig,\n  GenerativeContentBlob,\n  Part,\n  Tool,\n} from \"@google/generative-ai\";\n\n/**\n * this module contains type-definitions and Type-Guards\n */\n\n// Type-definitions\n\n/* outgoing types */\n\n/**\n * the config to initiate the session\n */\nexport type LiveConfig = {\n  model: string;\n  systemInstruction?: { parts: Part[] };\n  generationConfig?: Partial<LiveGenerationConfig>;\n  tools?: Array<Tool | { googleSearch: {} } | { codeExecution: {} }>;\n};\n\nexport type LiveGenerationConfig = GenerationConfig & {\n  responseModalities: \"text\" | \"audio\" | \"image\";\n  speechConfig?: {\n    voiceConfig?: {\n      prebuiltVoiceConfig?: {\n        voiceName: \"Puck\" | \"Charon\" | \"Kore\" | \"Fenrir\" | \"Aoede\" | string;\n      };\n    };\n  };\n};\n\nexport type LiveOutgoingMessage =\n  | SetupMessage\n  | ClientContentMessage\n  | RealtimeInputMessage\n  | ToolResponseMessage;\n\nexport type SetupMessage = {\n  setup: LiveConfig;\n};\n\nexport type ClientContentMessage = {\n  clientContent: {\n    turns: Content[];\n    turnComplete: boolean;\n  };\n};\n\nexport type RealtimeInputMessage = {\n  realtimeInput: {\n    mediaChunks: GenerativeContentBlob[];\n  };\n};\n\nexport type ToolResponseMessage = {\n  toolResponse: {\n    functionResponses: LiveFunctionResponse[];\n  };\n};\n\nexport type ToolResponse = ToolResponseMessage[\"toolResponse\"];\n\nexport type LiveFunctionResponse = {\n  response: object;\n  id: string;\n};\n\n/** Incoming types */\n\nexport type LiveIncomingMessage =\n  | ToolCallMessage\n  | ToolCallCancellationMessage\n  | SetupCompleteMessage\n  | ServerContentMessage;\n\nexport type SetupCompleteMessage = { setupComplete: {} };\n\nexport type ServerContentMessage = {\n  serverContent: ServerContent;\n};\n\nexport type ServerContent = ModelTurn | TurnComplete | Interrupted;\n\nexport type ModelTurn = {\n  modelTurn: {\n    parts: Part[];\n  };\n};\n\nexport type TurnComplete = { turnComplete: boolean };\n\nexport type Interrupted = { interrupted: true };\n\nexport type ToolCallCancellationMessage = {\n  toolCallCancellation: {\n    ids: string[];\n  };\n};\n\nexport type ToolCallCancellation =\n  ToolCallCancellationMessage[\"toolCallCancellation\"];\n\nexport type ToolCallMessage = {\n  toolCall: ToolCall;\n};\n\nexport type LiveFunctionCall = FunctionCall & {\n  id: string;\n};\n\n/**\n * A `toolCall` message\n */\nexport type ToolCall = {\n  functionCalls: LiveFunctionCall[];\n};\n\n/** log types */\nexport type StreamingLog = {\n  date: Date;\n  type: string;\n  count?: number;\n  message: string | LiveOutgoingMessage | LiveIncomingMessage;\n};\n\n// Type-Guards\n\nconst prop = (a: any, prop: string, kind: string = \"object\") =>\n  typeof a === \"object\" && typeof a[prop] === \"object\";\n\n// outgoing messages\nexport const isSetupMessage = (a: unknown): a is SetupMessage =>\n  prop(a, \"setup\");\n\nexport const isClientContentMessage = (a: unknown): a is ClientContentMessage =>\n  prop(a, \"clientContent\");\n\nexport const isRealtimeInputMessage = (a: unknown): a is RealtimeInputMessage =>\n  prop(a, \"realtimeInput\");\n\nexport const isToolResponseMessage = (a: unknown): a is ToolResponseMessage =>\n  prop(a, \"toolResponse\");\n\n// incoming messages\nexport const isSetupCompleteMessage = (a: unknown): a is SetupCompleteMessage =>\n  prop(a, \"setupComplete\");\n\nexport const isServerContenteMessage = (a: any): a is ServerContentMessage =>\n  prop(a, \"serverContent\");\n\nexport const isToolCallMessage = (a: any): a is ToolCallMessage =>\n  prop(a, \"toolCall\");\n\nexport const isToolCallCancellationMessage = (\n  a: unknown,\n): a is ToolCallCancellationMessage =>\n  prop(a, \"toolCallCancellation\") &&\n  isToolCallCancellation((a as any).toolCallCancellation);\n\nexport const isModelTurn = (a: any): a is ModelTurn =>\n  typeof (a as ModelTurn).modelTurn === \"object\";\n\nexport const isTurnComplete = (a: any): a is TurnComplete =>\n  typeof (a as TurnComplete).turnComplete === \"boolean\";\n\nexport const isInterrupted = (a: any): a is Interrupted =>\n  (a as Interrupted).interrupted;\n\nexport function isToolCall(value: unknown): value is ToolCall {\n  if (!value || typeof value !== \"object\") return false;\n\n  const candidate = value as Record<string, unknown>;\n\n  return (\n    Array.isArray(candidate.functionCalls) &&\n    candidate.functionCalls.every((call) => isLiveFunctionCall(call))\n  );\n}\n\nexport function isToolResponse(value: unknown): value is ToolResponse {\n  if (!value || typeof value !== \"object\") return false;\n\n  const candidate = value as Record<string, unknown>;\n\n  return (\n    Array.isArray(candidate.functionResponses) &&\n    candidate.functionResponses.every((resp) => isLiveFunctionResponse(resp))\n  );\n}\n\nexport function isLiveFunctionCall(value: unknown): value is LiveFunctionCall {\n  if (!value || typeof value !== \"object\") return false;\n\n  const candidate = value as Record<string, unknown>;\n\n  return (\n    typeof candidate.name === \"string\" &&\n    typeof candidate.id === \"string\" &&\n    typeof candidate.args === \"object\" &&\n    candidate.args !== null\n  );\n}\n\nexport function isLiveFunctionResponse(\n  value: unknown,\n): value is LiveFunctionResponse {\n  if (!value || typeof value !== \"object\") return false;\n\n  const candidate = value as Record<string, unknown>;\n\n  return (\n    typeof candidate.response === \"object\" && typeof candidate.id === \"string\"\n  );\n}\n\nexport const isToolCallCancellation = (\n  a: unknown,\n): a is ToolCallCancellationMessage[\"toolCallCancellation\"] =>\n  typeof a === \"object\" && Array.isArray((a as any).ids);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}