{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useEffect } from \"react\";\nexport function useWebcam() {\n  _s();\n  const [stream, setStream] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n  useEffect(() => {\n    const handleStreamEnded = () => {\n      setIsStreaming(false);\n      setStream(null);\n    };\n    if (stream) {\n      stream.getTracks().forEach(track => track.addEventListener(\"ended\", handleStreamEnded));\n      return () => {\n        stream.getTracks().forEach(track => track.removeEventListener(\"ended\", handleStreamEnded));\n      };\n    }\n  }, [stream]);\n  const start = async () => {\n    const mediaStream = await navigator.mediaDevices.getUserMedia({\n      video: true\n    });\n    setStream(mediaStream);\n    setIsStreaming(true);\n    return mediaStream;\n  };\n  const stop = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n      setIsStreaming(false);\n    }\n  };\n  const result = {\n    type: \"webcam\",\n    start,\n    stop,\n    isStreaming,\n    stream\n  };\n  return result;\n}\n_s(useWebcam, \"LGaKB8ZWXbXw/S7EGM0YveG2ZTI=\");","map":{"version":3,"names":["useState","useEffect","useWebcam","_s","stream","setStream","isStreaming","setIsStreaming","handleStreamEnded","getTracks","forEach","track","addEventListener","removeEventListener","start","mediaStream","navigator","mediaDevices","getUserMedia","video","stop","result","type"],"sources":["C:/SkinLensR/SkinLensR/my-agent-api/frontend/src/hooks/use-webcam.ts"],"sourcesContent":["/**\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useEffect } from \"react\";\nimport { UseMediaStreamResult } from \"./use-media-stream-mux\";\n\nexport function useWebcam(): UseMediaStreamResult {\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n\n  useEffect(() => {\n    const handleStreamEnded = () => {\n      setIsStreaming(false);\n      setStream(null);\n    };\n    if (stream) {\n      stream\n        .getTracks()\n        .forEach((track) => track.addEventListener(\"ended\", handleStreamEnded));\n      return () => {\n        stream\n          .getTracks()\n          .forEach((track) =>\n            track.removeEventListener(\"ended\", handleStreamEnded),\n          );\n      };\n    }\n  }, [stream]);\n\n  const start = async () => {\n    const mediaStream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n    });\n    setStream(mediaStream);\n    setIsStreaming(true);\n    return mediaStream;\n  };\n\n  const stop = () => {\n    if (stream) {\n      stream.getTracks().forEach((track) => track.stop());\n      setStream(null);\n      setIsStreaming(false);\n    }\n  };\n\n  const result: UseMediaStreamResult = {\n    type: \"webcam\",\n    start,\n    stop,\n    isStreaming,\n    stream,\n  };\n\n  return result;\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAG3C,OAAO,SAASC,SAASA,CAAA,EAAyB;EAAAC,EAAA;EAChD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,QAAQ,CAAqB,IAAI,CAAC;EAC9D,MAAM,CAACM,WAAW,EAAEC,cAAc,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EAErDC,SAAS,CAAC,MAAM;IACd,MAAMO,iBAAiB,GAAGA,CAAA,KAAM;MAC9BD,cAAc,CAAC,KAAK,CAAC;MACrBF,SAAS,CAAC,IAAI,CAAC;IACjB,CAAC;IACD,IAAID,MAAM,EAAE;MACVA,MAAM,CACHK,SAAS,CAAC,CAAC,CACXC,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAACC,gBAAgB,CAAC,OAAO,EAAEJ,iBAAiB,CAAC,CAAC;MACzE,OAAO,MAAM;QACXJ,MAAM,CACHK,SAAS,CAAC,CAAC,CACXC,OAAO,CAAEC,KAAK,IACbA,KAAK,CAACE,mBAAmB,CAAC,OAAO,EAAEL,iBAAiB,CACtD,CAAC;MACL,CAAC;IACH;EACF,CAAC,EAAE,CAACJ,MAAM,CAAC,CAAC;EAEZ,MAAMU,KAAK,GAAG,MAAAA,CAAA,KAAY;IACxB,MAAMC,WAAW,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;MAC5DC,KAAK,EAAE;IACT,CAAC,CAAC;IACFd,SAAS,CAACU,WAAW,CAAC;IACtBR,cAAc,CAAC,IAAI,CAAC;IACpB,OAAOQ,WAAW;EACpB,CAAC;EAED,MAAMK,IAAI,GAAGA,CAAA,KAAM;IACjB,IAAIhB,MAAM,EAAE;MACVA,MAAM,CAACK,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAACS,IAAI,CAAC,CAAC,CAAC;MACnDf,SAAS,CAAC,IAAI,CAAC;MACfE,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC;EAED,MAAMc,MAA4B,GAAG;IACnCC,IAAI,EAAE,QAAQ;IACdR,KAAK;IACLM,IAAI;IACJd,WAAW;IACXF;EACF,CAAC;EAED,OAAOiB,MAAM;AACf;AAAClB,EAAA,CAjDeD,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}